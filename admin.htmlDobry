<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Centrum Dowodzenia — Latarnia</title>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root { --bg:#0f1724; --card:#0b1220; --muted:#9aa4b2; --accent:#ff8f00; --accent-2:#ffb74d; --glass: rgba(255,255,255,0.03); --success:#d4edda; --danger:#f8d7da; font-family: 'Lato', Inter, "Segoe UI", Roboto, Arial, sans-serif; }
    html, body { height:100%; margin:0; background:linear-gradient(180deg,#071224 0%, #081827 60%); color:#e6eef8; }
    .wrap { max-width:1200px; margin:28px auto; padding:18px; }
    header { display:flex; gap:16px; align-items:center; justify-content:space-between; flex-wrap:wrap; }
    header h1 { margin:0; font-size:1.4rem; color:var(--accent); text-transform:uppercase; letter-spacing:0.06em; }
    .muted { color:var(--muted); font-size:0.9rem; }
    .muted-small { color:var(--muted); font-size:0.85rem; }
    .muted-small.danger { color:#f5b5bb; } .muted-small.success { color:#b7f0c2; }
    .chip { background:var(--glass); padding:8px 10px; border-radius:10px; color:var(--muted); text-decoration:none; border:1px solid rgba(255,255,255,0.03); }
    .grid { display:grid; gap:14px; }
    .g2 { grid-template-columns:1fr 1fr; }
    .g3 { grid-template-columns:1fr 1fr 1fr; }
    .card { background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:14px; border-radius:12px; border:1px solid rgba(255,255,255,0.03); box-shadow:0 6px 30px rgba(2,6,23,0.6); }
    .row { display:flex; gap:10px; align-items:center; }
    .primary { background:linear-gradient(180deg,var(--accent),var(--accent-2)); color:#081026; border:none; padding:8px 12px; border-radius:8px; cursor:pointer; font-weight:bold; }
    .primary:disabled { background:#555; color:#999; cursor:not-allowed; }
    .ghost { background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--muted); padding:8px 10px; border-radius:8px; cursor:pointer; }
    .danger { background:transparent; border:1px solid #ff555540; color:#ffb3b3; }
    .danger:hover { background: #ff555520; }
    .small { padding:6px 8px; border-radius:6px; font-size:0.9rem; }
    .list { margin-top:10px; display:flex; flex-direction:column; gap:8px; max-height:520px; overflow:auto; }
    .list-item { display:flex; justify-content:space-between; align-items:center; padding:10px; border-radius:8px; background:rgba(0,0,0,0.2); border:1px solid rgba(255,255,255,0.02); }
    .list-item-content { display:flex; flex-direction:column; gap:4px; }
    .list-item-actions { display: flex; gap: 6px; flex-shrink: 0; }
    .list-item:hover { background: rgba(255,255,255,0.06); }
    .list-item.selected { border-left: 4px solid var(--accent); background: rgba(255,143,0,0.1); }
    .list-item-content { display:flex; gap:15px; align-items:flex-start; width:100%; }
    .entry-list-thumb { width:60px; height:60px; object-fit:cover; border-radius:6px; flex-shrink:0; }
    .thumb { max-width:140px; height:auto; border-radius:8px; display:block; }
    label { display:block; font-size:0.85rem; color:var(--muted); margin-bottom:6px; }
    input, textarea, select { width:100%; padding:8px; border-radius:8px; border:1px solid rgba(255,255,255,0.1); background-color: rgba(255,255,255,0.05); color:#e6eef8; box-sizing:border-box; font-family:'Lato',sans-serif; }
    select option { background-color:#0b1220; color:#e6eef8; }
    .sep { height:1px; background:linear-gradient(90deg,transparent,#ffffff10,transparent); margin:12px 0; border-radius:20px; }
    .icon-picker { display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
    .icon-picker button { background:transparent; border:1px solid rgba(255,255,255,0.06); padding:6px; border-radius:6px; cursor:pointer; color:var(--muted); }
    .icon-picker button:hover, .icon-picker button:focus { outline:none; border-color:var(--accent-2); color:#fff; }
    #liveContent { background:rgba(255,255,255,0.03); padding:10px; border-radius:8px; min-height:160px; }
    .badge { display:inline-block; padding:2px 6px; border-radius:6px; font-size:0.75rem; background:rgba(255,255,255,0.08); color:#b3c0cf; }
    .entry-excerpt { color:#cfe4ff; }
    .entry-full { display:none; margin-top:6px; background:rgba(255,255,255,0.03); padding:8px; border-radius:6px; }
    .toggle-more { margin-top:6px; }
    @media (max-width:900px){ .g3, .g2 { grid-template-columns:1fr; } header { flex-direction:column; align-items:flex-start; gap:8px; } }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div>
        <h1><i class="fa-solid fa-satellite-dish"></i> Centrum Dowodzenia "Latarnia"</h1>
        <div class="muted">Zarządzaj projektem "Od Dna do Światła"</div>
      </div>
      <div class="row">
        <a class="chip" href="index.html" target="_blank" rel="noopener"><i class="fa-solid fa-arrow-up-right-from-square"></i> Podgląd</a>
        <div class="chip muted-small">Zalogowany: <span id="adminEmail">—</span></div>
        <button id="logoutBtn" class="ghost"><i class="fa-solid fa-right-from-bracket"></i> Wyloguj</button>
      </div>
    </header>

    <main class="grid">
      <section class="card">
        <h3 style="margin:0"><i class="fa-solid fa-life-ring"></i> Zarządzaj Pomocą</h3>
        <form id="helpForm" class="grid g2" style="margin-top:8px;">
          <div><label for="helpWoj">Województwo</label>
            <select id="helpWoj" required>
              <option value="Ogólnopolskie">Ogólnopolskie</option>
              <option value="Dolnośląskie">Dolnośląskie</option>
              <option value="Kujawsko-Pomorskie">Kujawsko-Pomorskie</option>
              <option value="Lubelskie">Lubelskie</option>
              <option value="Lubuskie">Lubuskie</option>
              <option value="Łódzkie">Łódzkie</option>
              <option value="Małopolskie">Małopolskie</option>
              <option value="Mazowieckie">Mazowieckie</option>
              <option value="Opolskie">Opolskie</option>
              <option value="Podkarpackie">Podkarpackie</option>
              <option value="Podlaskie">Podlaskie</option>
              <option value="Pomorskie">Pomorskie</option>
              <option value="Śląskie">Śląskie</option>
              <option value="Świętokrzyskie">Świętokrzyskie</option>
              <option value="Warmińsko-Mazurskie">Warmińsko-Mazurskie</option>
              <option value="Wielkopolskie">Wielkopolskie</option>
              <option value="Zachodniopomorskie">Zachodniopomorskie</option>
            </select>
          </div>
          <div><label for="helpName">Nazwa Ośrodka</label><input id="helpName" required /></div>
          <div><label for="helpAddress">Adres</label><input id="helpAddress" /></div>
          <div><label for="helpPhone">Telefon</label><input id="helpPhone" /></div>
          <div style="grid-column:1/-1"><label for="helpDesc">Opis</label><textarea id="helpDesc" rows="2"></textarea></div>
          <div style="grid-column:1/-1"><label for="helpLink">Link (URL)</label><input id="helpLink" type="url" /></div>
          <div style="grid-column:1/-1" class="row">
            <button id="addHelpBtn" class="primary small" type="submit"><i class="fa-solid fa-plus"></i> Dodaj</button>
            <button id="cancelHelpEditBtn" class="ghost small" type="button" style="display:none">Anuluj</button>
            <div style="flex:1"></div><div id="helpMsg" class="muted-small"></div>
          </div>
        </form>
        <div class="sep"></div>
        <div id="helpListContainer" class="list"></div>
      </section>

      <section class="card">
        <h3 style="margin:0"><i class="fa-solid fa-bars"></i> Menu i Sekcje</h3>
        <form id="menuForm" class="grid g3" style="margin-top:8px;">
          <div><label for="menuText">Tekst</label><input id="menuText" required /></div>
          <div><label for="menuUrl">URL</label><input id="menuUrl" required /></div>
          <div><label for="menuOrder">Kolejność</label><input id="menuOrder" type="number" value="0" /></div>
          <div style="grid-column:1/-1" class="row">
            <button id="addMenuBtn" class="primary small" type="submit"><i class="fa-solid fa-plus"></i> Dodaj</button>
            <button id="cancelMenuEditBtn" class="ghost small" type="button" style="display:none">Anuluj</button>
            <div style="flex:1"></div><div id="menuMsg" class="muted-small"></div>
          </div>
        </form>
        <div class="sep"></div>
        <div id="menuListContainer" class="list"></div>
      </section>

      <section class="card">
        <h3 style="margin:0"><i class="fa-solid fa-pen-to-square"></i> Wpisy</h3>
        <form id="entryForm" style="margin-top:8px;">
          <div class="grid g2">
            <div><label for="sectionSelect">Sekcja</label><select id="sectionSelect"></select></div>
            <div><label for="authorInput">Autor</label><input id="authorInput" /></div>
            <div>
              <label for="themeSelect">Styl wpisu</label>
              <select id="themeSelect">
                <option value="auto">Auto (wg sekcji)</option>
                <option value="piciorys">Piciorys (Gazeta)</option>
                <option value="princess">Księżniczka (Magiczny)</option>
                <option value="default">Domyślny (Szklany)</option>
              </select>
            </div>
            <div class="row" style="align-items:flex-end">
              <span class="badge" id="draftBadge">Wersja robocza: —</span>
              <button type="button" id="clearDraftBtn" class="ghost small" title="Wyczyść wersję roboczą"><i class="fa-solid fa-eraser"></i></button>
            </div>
            <div style="grid-column:1/-1">
              <label for="titleInput">Tytuł (możesz dodać ikonę)</label>
              <input id="titleInput" />
              <div class="icon-picker" id="iconPicker"></div>
            </div>
            <div style="grid-column:1/-1">
              <label for="contentInput">Treść</label>
              <textarea id="contentInput"></textarea>
            </div>
            <div>
              <label for="attachInput">Załącznik</label>
              <input id="attachInput" type="file" accept="image/*" />
            </div>
            <div><label>&nbsp;</label><div id="uploadPreview"></div></div>
            <div style="grid-column:1/-1" class="row">
              <button id="publishBtn" class="primary small" type="submit"><i class="fa-solid fa-floppy-disk"></i> Opublikuj</button>
              <button id="cancelEntryEditBtn" class="ghost small" type="button" style="display:none">Anuluj</button>
              <div style="flex:1"></div><div id="formMsg" class="muted-small"></div>
            </div>
          </div>
        </form>
        <div class="sep"></div>
        <div class="grid g3">
          <div><label for="filterSection">Filtruj</label><select id="filterSection"></select></div>
          <div><label for="searchInput">Szukaj</label><input id="searchInput" /></div>
          <div><label for="sortSelect">Sortuj</label>
            <select id="sortSelect">
              <option value="desc">Najnowsze</option>
              <option value="asc">Najstarsze</option>
              <option value="title">Tytuł A→Z</option>
            </select>
          </div>
        </div>
        <div id="entriesList" class="list"></div>
        <div class="sep"></div>
        <div class="card">
          <div id="liveTitle"></div>
          <div id="liveMeta" class="muted-small"></div>
          <div id="liveContent"></div>
        </div>
      </section>

      <div class="grid g3">
        <section class="card">
          <h3 style="margin:0"><i class="fa-solid fa-wand-magic-sparkles"></i> Iskierki</h3>
          <form id="sparkForm" style="margin-top:8px;">
            <div style="display:flex; gap:8px;">
              <input id="sparkInput" /><button class="primary small" type="submit"><i class="fa-solid fa-plus"></i></button>
            </div>
          </form>
          <div class="sep"></div>
          <div id="sparksList" class="list"></div>
        </section>

        <section class="card">
          <h3 style="margin:0"><i class="fa-solid fa-music"></i> Playlista</h3>
          <form id="playlistForm" class="grid g2" style="margin-top:8px; gap:4px;">
            <input id="songTitle" placeholder="Tytuł" />
            <input id="songLink" placeholder="URL" />
            <div style="grid-column:1/-1"><button type="submit" class="primary small" style="width:100%"><i class="fa-solid fa-plus"></i> Dodaj</button></div>
          </form>
          <div class="sep"></div>
          <div id="playlistList" class="list"></div>
        </section>

        <section class="card">
          <h3 style="margin:0"><i class="fa-solid fa-headphones-simple"></i> Lektor</h3>
          <p class="muted-small" id="readerSelectionInfo">Zaznacz wpis na liście, by go odsłuchać.</p>
          <div style="margin-top:8px"><button id="ttsListenBtn" class="primary small" disabled><i class="fa-solid fa-play"></i> Odsłuchaj</button></div>
          <div class="sep"></div>
          <div id="readerStatus" class="muted-small">Lektor: gotowy</div>
        </section>
      </div>

      <section class="card">
        <h3 style="margin:0"><i class="fa-solid fa-images"></i> Galeria</h3>
        <form id="galleryForm" class="grid g3" style="margin-top:8px;">
          <div><label for="galleryDesc">Opis</label><input id="galleryDesc" /></div>
          <div><label for="galleryUpload">Plik</label><input id="galleryUpload" type="file" accept="image/*" /></div>
          <div><label>&nbsp;</label><button id="uploadGalleryBtn" class="primary small" type="submit" style="width:100%"><i class="fa-solid fa-upload"></i> Wyślij</button></div>
        </form>
        <label style="margin-top:8px">Postęp:</label>
        <progress id="galleryProgressBar" value="0" max="100" style="width:100%"></progress>
        <div class="sep"></div>
        <div id="galleryList" class="list"></div>
      </section>

      <section class="card">
        <h3 style="margin:0"><i class="fa-solid fa-sticky-note"></i> Notatki</h3>
        <form id="noteForm" style="margin-top:8px;">
          <div><label for="noteTitle">Tytuł</label><input id="noteTitle" required /></div>
          <div style="grid-column:1/-1"><label for="noteContent">Treść</label><textarea id="noteContent" rows="2" required></textarea></div>
          <div style="grid-column:1/-1" class="row">
            <button id="addNoteBtn" class="primary small" type="submit"><i class="fa-solid fa-plus"></i> Dodaj</button>
            <button id="cancelNoteEditBtn" class="ghost small" type="button" style="display:none">Anuluj</button>
            <div style="flex:1"></div><div id="noteMsg" class="muted-small"></div>
          </div>
        </form>
        <div class="sep"></div>
        <div id="noteListContainer" class="list"></div>
      </section>
    </main>

    <footer><div class="muted-small">© 2025 Od Dna do Światła — Panel administracyjny</div></footer>
  </div>

  <script src="https://cdn.ckeditor.com/4.22.1/full/ckeditor.js"></script>
  <script type="module" src="/js/admin.js"></script>

</body>
</html>

