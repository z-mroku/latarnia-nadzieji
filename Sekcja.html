<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wczytywanie sekcji... ‚Äî Latarnia Nadziei</title>
  
  <link rel="stylesheet" href="/css/style.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
  
  <style>
    /* STYLE BAZOWE */
    html, body { height: 100%; margin: 0; padding: 0; overflow-x: hidden; background-color: #1a1a1a; color: #fff; font-family: sans-serif; }
    .loading-spinner { border: 4px solid rgba(255, 255, 255, 0.1); border-left-color: #ffd97b; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; margin: 100px auto; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .full-content { margin-top: 1em; border-left: 3px solid rgba(255,217,123,0.5); padding-left: 1em; }
    
    /* PRZYCISK POWROTU */
    .back-btn {
        background: rgba(0,0,0,0.6);
        color: #ffd97b;
        padding: 10px 15px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        border: 1px solid rgba(255,217,123,0.3);
        transition: all 0.3s;
        backdrop-filter: blur(5px);
    }
    .back-btn:hover {
        background: rgba(255,217,123,0.2);
        color: #fff;
    }

    /* POPRAWKI DLA META DANYCH (Wy≈õwietlenia, lajki) */
    .entry-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        color: #888;
        font-size: 0.85rem;
        margin-bottom: 15px;
        border-bottom: 1px solid rgba(255,255,255,0.1);
        padding-bottom: 10px;
    }
    .entry-meta span {
        display: flex;
        align-items: center;
        gap: 5px;
    }
    .entry-meta i {
        color: #ffd97b;
    }
  </style>
</head>
<body>
  
  <a href="/index.html" class="back-btn" style="position: fixed; top: 15px; left: 15px; z-index: 1001;">
      <i class="fas fa-arrow-left"></i> Powr√≥t
  </a>
  
  <div id="content-wrapper">
    <div class="loading-spinner"></div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/three@0.154.0/build/three.min.js"></script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, query, orderBy, getDocs, limit, doc, updateDoc, increment, addDoc, onSnapshot, serverTimestamp, where } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    // --- Konfiguracja Firebase ---
    const firebaseConfig = {
      apiKey: "AIzaSyD1kuonCrsLNV4ObBiI2jsqdnGx3vaA9_Q",
      authDomain: "projekt-latarnia.firebaseapp.app",
      projectId: "projekt-latarnia",
      storageBucket: "projekt-latarnia.appspot.app",
      messagingSenderId: "244008044225",
      appId: "1:244008044225:web:67fbc7f5cfa89b627fb640",
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    // ==========================================================
    // üéµ CONFIG HYMNU üéµ
    // ==========================================================
    const HYMN_URL = "audio/hymn.mp3"; 

    // ========================================
    // MusicPlayer
    // ========================================
    const MusicPlayer = (() => {
        let audio = null;
        let isPlaying = false;
        let btnElement = null;

        const init = () => {
            console.log("Noema: Inicjalizacja MusicPlayer...");
            audio = new Audio(HYMN_URL);
            audio.loop = true; 
            
            const style = document.createElement('style');
            style.innerHTML = `
                .hymn-wrapper {
                    position: fixed !important;
                    bottom: 25px !important;
                    right: 25px !important;
                    z-index: 999999 !important;
                    display: flex;
                    flex-direction: column;
                    align-items: center;
                    gap: 8px;
                    pointer-events: auto;
                }
                .hymn-btn-3d {
                    position: relative; width: 70px; height: 70px; border-radius: 50%;
                    border: 2px solid rgba(255, 217, 123, 0.3);
                    background: linear-gradient(145deg, #ffd97b, #c5a059);
                    box-shadow: 0 6px 0 #8c7035, 0 12px 20px rgba(0,0,0,0.6), inset 0 2px 0 rgba(255,255,255,0.5);
                    cursor: pointer; transition: all 0.1s; display: flex; justify-content: center; align-items: center;
                    font-size: 26px; color: #222; outline: none; animation: entrance 1s ease-out forwards;
                }
                @keyframes entrance { from { transform: scale(0) rotate(-180deg); opacity: 0; } to { transform: scale(1) rotate(0); opacity: 1; } }
                .hymn-btn-3d:active { box-shadow: 0 0 0 #8c7035, inset 0 4px 10px rgba(0,0,0,0.3); transform: translateY(6px); }
                .hymn-btn-3d i { filter: drop-shadow(0 1px 1px rgba(255,255,255,0.4)); }
                .hymn-label { background: rgba(0,0,0,0.9); color: #ffd97b; padding: 4px 10px; border-radius: 8px; font-size: 0.75rem; font-weight: bold; text-transform: uppercase; letter-spacing: 1px; opacity: 0; transition: opacity 0.3s; pointer-events: none; white-space: nowrap; border: 1px solid rgba(255, 217, 123, 0.2); }
                .hymn-wrapper:hover .hymn-label { opacity: 1; }
                .pulse-ring { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border-radius: 50%; box-shadow: 0 0 0 0 rgba(255, 217, 123, 0.6); animation: pulse-gold 2s infinite; z-index: -1; display: none; }
                @keyframes pulse-gold { 0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(255, 217, 123, 0.6); } 70% { transform: scale(1.6); box-shadow: 0 0 0 25px rgba(255, 217, 123, 0); } 100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(255, 217, 123, 0); } }
            `;
            document.head.appendChild(style);

            const wrapper = document.createElement('div');
            wrapper.className = 'hymn-wrapper';
            wrapper.innerHTML = `
                <span class="hymn-label">Odtw√≥rz Hymn</span>
                <div class="pulse-ring" id="hymn-pulse"></div>
                <button class="hymn-btn-3d" id="hymn-btn" aria-label="Odtw√≥rz Hymn">
                    <i class="fas fa-music"></i>
                </button>
            `;
            document.body.appendChild(wrapper);
            btnElement = document.getElementById('hymn-btn');
            btnElement.addEventListener('click', togglePlay);
        };
        const togglePlay = () => { isPlaying ? stop() : play(); };
        const play = () => {
            if (!audio) return;
            if (typeof lektor !== 'undefined') {
                lektor.stop();
                document.querySelectorAll('[data-action="lector-play-pause"]').forEach(btn => btn.innerHTML = `<i class="fas fa-play"></i> Ods≈Çuchaj`);
            }
            audio.play().then(() => { isPlaying = true; updateUI(true); })
            .catch(e => { console.error("B≈ÇƒÖd audio:", e); alert("B≈ÇƒÖd: Nie znaleziono pliku 'audio/hymn.mp3'."); });
        };
        const stop = () => { if (!audio) return; audio.pause(); isPlaying = false; updateUI(false); };
        const updateUI = (playing) => {
            const icon = btnElement.querySelector('i');
            const pulse = document.getElementById('hymn-pulse');
            if (playing) { icon.className = 'fas fa-pause'; pulse.style.display = 'block'; }
            else { icon.className = 'fas fa-music'; pulse.style.display = 'none'; }
        };
        return { init, stop, play };
    })();

    // ========================================
    // Lektor
    // ========================================
    const lektor = (() => {
        let queue = [];
        let currentUtterance = null;
        let isPaused = false;
        let selectedVoice = null;
        const stripHtml = (html) => { const div = document.createElement("div"); div.innerHTML = html; return div.textContent || div.innerText || ""; };
        const numToWords = (num) => { if (num > 999999) return num.toString(); const ones = ["zero","jeden","dwa","trzy","cztery","piƒôƒá","sze≈õƒá","siedem","osiem","dziewiƒôƒá"]; const teens = ["dziesiƒôƒá","jedena≈õcie","dwana≈õcie","trzyna≈õcie","czterna≈õcie","piƒôtna≈õcie","szesna≈õcie","siedemna≈õcie","osiemna≈õcie","dziewiƒôtna≈õcie"]; const tens = ["","dziesiƒôƒá","dwadzie≈õcia","trzydzie≈õci","czterdzie≈õci","piƒôƒádziesiƒÖt","sze≈õƒádziesiƒÖt","siedemdziesiƒÖt","osiemdziesiƒÖt","dziewiƒôƒádziesiƒÖt"]; const hundreds = ["","sto","dwie≈õcie","trzysta","czterysta","piƒôƒáset","sze≈õƒáset","siedemset","osiemset","dziewiƒôƒáset"]; if (num < 10) return ones[num]; if (num < 20) return teens[num-10]; if (num < 100) return tens[Math.floor(num/10)] + (num%10 ? " " + ones[num%10] : ""); if (num < 1000) return hundreds[Math.floor(num/100)] + (num%100 ? " " + numToWords(num%100) : ""); if (num < 2000) return "tysiƒÖc " + (num%1000 ? numToWords(num%1000) : ""); const thousands = Math.floor(num/1000); let thousandsStr = ""; if ([2,3,4].includes(thousands % 10) && ![12,13,14].includes(thousands % 100)) thousandsStr = numToWords(thousands) + " tysiƒÖce"; else thousandsStr = numToWords(thousands) + " tysiƒôcy"; return thousandsStr + (num%1000 ? " " + numToWords(num%1000) : ""); };
        const parseDate = (str) => { const match = str.match(/^(\d{1,2})\.(\d{1,2})\.(\d{4})$/); if (!match) return null; const [_, d, m, y] = match.map(Number); const months = ["","stycznia","lutego","marca","kwietnia","maja","czerwca","lipca","sierpnia","wrze≈õnia","pa≈∫dziernika","listopada","grudnia"]; return `${numToWords(d)} ${months[m]} ${numToWords(y)} roku`; };
        const parseTime = (str) => { const match = str.match(/^(\d{1,2}):(\d{2})$/); if (!match) return null; const [_, h, m] = match.map(Number); if (m === 0) return `${numToWords(h)} zero zero`; return `${numToWords(h)} ${numToWords(m)}`; };
        const normalizeText = (input = "") => { let text = stripHtml(input); const replacements = { "np.": "na przyk≈Çad", "itd.": "i tak dalej", "itp.": "i tym podobne", "m.in.": "miƒôdzy innymi", "tj.": "to jest", "dr ": "doktor ", "prof.": "profesor", "ul.": "ulica", "mr ": "mister ", "mrs ": "missis " }; for (const [abbr, full] of Object.entries(replacements)) { text = text.replace(new RegExp("\\b" + abbr.replace(".", "\\.") + "\\b", "gi"), full); } text = text.replace(/\b\d{1,2}\.\d{1,2}\.\d{4}\b/g, (d) => parseDate(d) || d); text = text.replace(/\b\d{1,2}:\d{2}\b/g, (t) => parseTime(t) || t); text = text.replace(/\b\d+\b/g, (n) => { const num = parseInt(n, 10); return isNaN(num) ? n : numToWords(num); }); return text.replace(/\s+/g, " ").trim(); };
        const splitText = (text, maxLen = 250) => { const parts = []; if (!text) return parts; const sentences = text.match(/[^.!?]+[.!?]*/g) || []; let chunk = ""; for (const s of sentences) { if ((chunk + " " + s).length > maxLen) { if (chunk) parts.push(chunk.trim()); chunk = s; } else { chunk += " " + s; } } if (chunk.trim()) parts.push(chunk.trim()); return parts.filter(p => p); };
        const initVoices = () => { const voices = window.speechSynthesis.getVoices(); selectedVoice = voices.find(v => v.lang === "pl-PL") || voices[0]; }; window.speechSynthesis.onvoiceschanged = initVoices; initVoices();
        const speakNext = () => { if (isPaused || queue.length === 0) { currentUtterance = null; return; } const text = queue.shift(); currentUtterance = new SpeechSynthesisUtterance(text); currentUtterance.lang = "pl-PL"; if (selectedVoice) currentUtterance.voice = selectedVoice; currentUtterance.rate = 0.9; currentUtterance.onend = () => { currentUtterance = null; if (!isPaused) speakNext(); }; window.speechSynthesis.speak(currentUtterance); };
        const enqueue = (rawText) => { if (!rawText) return; MusicPlayer.stop(); stop(); const parts = splitText(normalizeText(rawText)); queue.push(...parts); speakNext(); };
        const stop = () => { isPaused = false; queue = []; window.speechSynthesis.cancel(); };
        const pause = () => { if (window.speechSynthesis.speaking && !isPaused) { window.speechSynthesis.pause(); isPaused = true; } };
        const resume = () => { if (!isPaused) return; MusicPlayer.stop(); isPaused = false; if (window.speechSynthesis.paused) window.speechSynthesis.resume(); else if (queue.length > 0) speakNext(); };
        const getStatus = () => ({ speaking: window.speechSynthesis.speaking, paused: isPaused });
        return { enqueue, stop, pause, resume, getStatus };
    })();

    // ========================================
    // SectionLoader (Obs≈Çuga tre≈õci - Z PE≈ÅNYM RENDEREM)
    // ========================================
    const SectionLoader = {
        state: { sectionName: '', cleanupFunctions: [] },
        elements: { wrapper: document.getElementById('content-wrapper') },
        utils: {
            escapeHtml: (s) => String(s).replace(/[&<>"']/g, c => ({ '&': '&amp;', '<': '&lt;', '>': '&gt;', '"': '&quot;', "'": '&#39;' }[c])),
            stripHtml: (s) => String(s).replace(/<[^>]*>?/gm, ''),
            likedPostsKey: 'latarniaLikedPosts',
            getLikedPosts: () => { try { return JSON.parse(localStorage.getItem('latarniaLikedPosts') || '[]'); } catch(e){ return []; } },
            addLikedPost: (id) => { const l = SectionLoader.utils.getLikedPosts(); if(!l.includes(id)){ l.push(id); localStorage.setItem('latarniaLikedPosts', JSON.stringify(l)); } }
        },
        router: {
            'Piciorys Chudego': { fetcher: 'fetchSingleEntry', renderer: 'renderPiciorys', theme: 'theme-piciorys' },
            'Z punktu widzenia ksiƒô≈ºniczki': { fetcher: 'fetchSingleEntry', renderer: 'renderKsiezniczka', theme: 'theme-ksiezniczka' },
            'Pomoc': { fetcher: 'fetchAllHelpEntries', renderer: 'renderPomoc', theme: 'theme-pomoc' },
            'List w Butelce': { fetcher: 'fetchNoOp', renderer: 'renderBottleSection', theme: 'theme-bottle' },
            'Galeria': { fetcher: 'fetchNoOp', renderer: 'renderGallery', theme: 'theme-gallery' },
            'Wsparcie': { fetcher: 'fetchNoOp', renderer: 'renderSupportSection', theme: 'theme-support' },
            'support.html': { fetcher: 'fetchNoOp', renderer: 'renderSupportSection', theme: 'theme-support' },
            'Sekcja.html': { fetcher: 'fetchNoOp', renderer: 'renderSupportSection', theme: 'theme-support' },
            '__default__': { fetcher: 'fetchAllEntries', renderer: 'renderStandard', queryOptions: [orderBy('createdAt', 'desc')], theme: 'theme-kronika' }
        },

        async init() {
            this.state.cleanupFunctions.forEach(c => c()); this.state.cleanupFunctions = [];
            this.setupEventListeners();
            try {
                const params = new URLSearchParams(window.location.search);
                this.state.sectionName = decodeURIComponent(params.get('nazwa') || 'Kronika').trim();
                const route = this.router[this.state.sectionName] || this.router['__default__'];
                document.documentElement.className = route.theme;
                document.title = `${this.utils.escapeHtml(this.state.sectionName)} ‚Äî Latarnia Nadziei`;
                const data = await this.fetch[route.fetcher].call(this, route.queryOptions);
                this.render[route.renderer].call(this, data);
            } catch (e) {
                console.error(e);
                this.render.renderError.call(this, 'B≈ÇƒÖd', 'WystƒÖpi≈Ç problem z wczytywaniem sekcji.');
            }
        },

        setupEventListeners() {
            this.elements.wrapper.addEventListener('click', async (event) => {
                const btn = event.target.closest('[data-action]');
                if (!btn) return;
                const action = btn.dataset.action;
                const docId = btn.closest('[data-doc-id]')?.dataset.docId;

                if (action === 'like' && docId && !btn.disabled) {
                    if(this.utils.getLikedPosts().includes(docId)) return;
                    btn.disabled = true;
                    try {
                        const col = (['Wsparcie','support.html','Sekcja.html'].includes(this.state.sectionName)) ? 'support_stories' : `sekcje/${this.state.sectionName}/entries`;
                        await updateDoc(doc(db, col, docId), { likes: increment(1) });
                        this.utils.addLikedPost(docId);
                        const ctr = btn.closest('article, .log-container').querySelector('[data-likes-counter]');
                        if(ctr) {
                            const current = parseInt(ctr.innerText.match(/\d+/)?.[0] || 0);
                            ctr.innerHTML = `<i class="fas fa-heart"></i> Polubienia: ${current + 1}`;
                        }
                        btn.innerHTML = `<i class="fas fa-check"></i> Polubiono`;
                    } catch(e) { btn.disabled = false; console.error(e); }
                } else if (action === 'read-more') {
                    const content = btn.closest('.story-item').querySelector('.full-content');
                    content.style.display = content.style.display === 'none' ? 'block' : 'none';
                    btn.textContent = content.style.display === 'block' ? 'Ukryj' : 'Czytaj Dalej';
                    // Zliczanie wy≈õwietlenia przy rozwiniƒôciu
                    if(docId && content.style.display === 'block') {
                         try { await updateDoc(doc(db, `sekcje/${this.state.sectionName}/entries`, docId), { views: increment(1) }); } catch(e){}
                    }
                } else if (action === 'lector-play-pause') {
                    const status = lektor.getStatus();
                    if(status.speaking && !status.paused) { lektor.pause(); btn.innerHTML = `<i class="fas fa-play"></i> Wzn√≥w`; }
                    else if(status.paused) { lektor.resume(); btn.innerHTML = `<i class="fas fa-pause"></i> Pauza`; }
                    else {
                        document.querySelectorAll('[data-action="lector-play-pause"]').forEach(b => b.innerHTML = `<i class="fas fa-play"></i> Ods≈Çuchaj`);
                        lektor.enqueue(btn.closest('[data-text]').dataset.text);
                        btn.innerHTML = `<i class="fas fa-pause"></i> Pauza`;
                    }
                }
            });
        },

        fetch: {
            async fetchNoOp() { return null; },
            async fetchSingleEntry() { const q = query(collection(db, 'sekcje', this.state.sectionName, 'entries'), limit(1)); const s = await getDocs(q); return s.empty ? null : s.docs[0]; },
            async fetchAllEntries(opts) { const s = await getDocs(query(collection(db, `sekcje/${this.state.sectionName}/entries`), ...opts)); return s.docs; },
            async fetchAllHelpEntries() { return (await getDocs(query(collection(db, 'help'), orderBy('name', 'asc')))).docs; }
        },

        render: {
            renderSupportSection() {
                this.elements.wrapper.innerHTML = `<div class="support-wrap"><header class="support-header"><h1>Oddech ≈öwiat≈Ça</h1><p class="lead">Sekcja Wsparcia</p></header><form id="supportForm" class="support-form"><input id="supportName" placeholder="Imiƒô" required /><textarea id="supportStory" placeholder="Historia..." required></textarea><button class="btn" type="submit">Opublikuj</button></form><div id="feed" class="feed"></div></div>`;
                const feed = document.getElementById('feed');
                const form = document.getElementById('supportForm');
                const q = query(collection(db, "support_stories"), where("isApproved", "==", true), orderBy("t", "desc"));
                this.state.cleanupFunctions.push(onSnapshot(q, (snap) => {
                    feed.innerHTML = '';
                    snap.forEach(d => {
                        const item = d.data();
                        const isLiked = this.utils.getLikedPosts().includes(d.id);
                        const card = document.createElement('article');
                        card.className = 'card';
                        card.dataset.docId = d.id;
                        card.dataset.text = `${item.name}. ${item.text}`;
                        card.innerHTML = `
                          <h3>${this.utils.escapeHtml(item.name)}</h3>
                          <p>${this.utils.escapeHtml(item.text)}</p>
                          <div class="meta">
                             <span data-likes-counter><i class="fas fa-heart"></i> Polubienia: ${item.likes || 0}</span>
                          </div>
                          <div class="card-actions">
                             <button class="card-action-btn" data-action="lector-play-pause"><i class="fas fa-play"></i> Ods≈Çuchaj</button>
                             <button class="card-action-btn" data-action="like" ${isLiked ? 'disabled' : ''}>${isLiked ? '<i class="fas fa-check"></i> Polubiono' : '<i class="fas fa-heart"></i> Lubiƒô to'}</button>
                          </div>`;
                        feed.appendChild(card);
                    });
                }));
                form.addEventListener('submit', async (e) => {
                    e.preventDefault();
                    const n = document.getElementById('supportName').value;
                    const t = document.getElementById('supportStory').value;
                    await addDoc(collection(db, "support_stories"), { name: n, text: t, t: serverTimestamp(), isApproved: false, likes: 0 });
                    form.reset(); alert("Wys≈Çano do moderacji.");
                });
            },
            
            // --- POPRAWIONY RENDER PICIORYS (DODA≈ÅAM META DANE I LIKE) ---
            renderPiciorys(doc) { 
                if(!doc) return this.render.renderEmpty.call(this);
                const e = doc.data();
                const isLiked = this.utils.getLikedPosts().includes(doc.id);
                this.elements.wrapper.innerHTML = `
                <div class="log-container" data-doc-id="${doc.id}" data-text="${this.utils.escapeHtml(e.text)}">
                    <h2 class="log-title">${this.utils.escapeHtml(e.introTitle||'Piciorys')}</h2>
                    <div class="entry-meta">
                        <span><i class="fas fa-eye"></i> ${e.views || 0}</span>
                        <span data-likes-counter><i class="fas fa-heart"></i> Polubienia: ${e.likes || 0}</span>
                    </div>
                    <div class="log-content">${e.text}</div>
                    <div class="log-actions">
                        <button class="action-button" data-action="lector-play-pause"><i class="fas fa-play"></i> Ods≈Çuchaj</button>
                        <button class="action-button" data-action="like" ${isLiked ? 'disabled' : ''}>${isLiked ? '<i class="fas fa-check"></i> Polubiono' : '<i class="fas fa-heart"></i> Lubiƒô to'}</button>
                    </div>
                </div>`;
            },

            // --- POPRAWIONY RENDER STANDARDOWY (DLA DROGI WOJOWNIKA I INNYCH) ---
            renderStandard(docs) {
                if(!docs.length) return this.render.renderEmpty.call(this);
                const html = docs.map(d => {
                    const e = d.data();
                    const isLiked = this.utils.getLikedPosts().includes(d.id);
                    const dateStr = e.createdAt ? e.createdAt.toDate().toLocaleDateString('pl-PL') : 'Brak daty';
                    
                    return `
                    <article class="story-item" data-doc-id="${d.id}" data-text="${this.utils.escapeHtml(e.title)}. ${this.utils.escapeHtml(e.text)}">
                        <h3 class="entry-title">${this.utils.escapeHtml(e.title)}</h3>
                        
                        <div class="entry-meta">
                            <span><i class="fas fa-user-edit"></i> ${this.utils.escapeHtml(e.author || 'Chudy')}</span>
                            <span><i class="fas fa-calendar-alt"></i> ${dateStr}</span>
                            <span data-likes-counter><i class="fas fa-heart"></i> Polubienia: ${e.likes || 0}</span>
                            <span><i class="fas fa-eye"></i> Wy≈õwietlenia: ${e.views || 0}</span>
                        </div>

                        <div class="entry-content">
                            <p>${this.utils.stripHtml(e.text).substring(0,300)}...</p>
                            <div class="full-content" style="display:none">${e.text}</div>
                        </div>

                        <div class="log-actions">
                            <button class="action-button" data-action="read-more">Czytaj Dalej</button>
                            <button class="action-button" data-action="lector-play-pause"><i class="fas fa-play"></i> Ods≈Çuchaj</button>
                            <button class="action-button" data-action="like" ${isLiked ? 'disabled' : ''}>${isLiked ? '<i class="fas fa-check"></i> Polubiono' : '<i class="fas fa-heart"></i> Lubiƒô to'}</button>
                        </div>
                    </article>`;
                }).join('');
                this.elements.wrapper.innerHTML = `<div class="content-container"><h2 class="fancy-title">${this.state.sectionName}</h2><div class="story-list">${html}</div></div>`;
            },
            
            renderError(t, m) { this.elements.wrapper.innerHTML = `<div class="content-container"><h2>${t}</h2><p>${m}</p></div>`; },
            renderEmpty() { this.render.renderError('Pusto', 'Brak wpis√≥w.'); },
            renderKsiezniczka() { this.render.renderError('Info', 'Sekcja w budowie.'); },
            renderPomoc() { this.render.renderError('Info', 'Sekcja w budowie.'); },
            renderGallery() { this.render.renderError('Info', 'Sekcja w budowie.'); },
            renderBottleSection() { this.render.renderError('Info', 'Sekcja w budowie.'); }
        }
    };

    // START
    document.addEventListener("DOMContentLoaded", () => {
        MusicPlayer.init();
        SectionLoader.init();
    });
  </script>

</body>
</html>
